---
title: "Capstone"
author: "Cassidy"
date: "12/15/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##Load tidyverse etc.
```{r}
library(tidyverse)
library(dplyr)
library(scales)
library(ggplot2)
```
#How many entires are predicted to have glaucoma (glaucoma = 1) ? What is the average __ of those predicted to have glaucoma. Compare to mean of those predicted not to have glaucoma? Is the value of  RNFL4.mean able to predict glaucoma ?
```{r}
data <- read_csv('glaucoma_data/ds_whole.csv') %>%

 print()

data_g1 <- data %>%
  select(`glaucoma`, `RNFL4.mean`) %>% #select columns and pipe to filter
#filter for counts =1 using filter_if and all_vars
  filter_if(is.numeric, all_vars(.>=1)) %>% #https://suzan.rbind.io/2018/02/dplyr-tutorial-3/#filter-if
print()

data_g0 <- data %>%
  select(`glaucoma`, `RNFL4.mean`) %>% #select columns and pipe to filter
#filter for counts =1 using filter_if and all_vars
  filter_if(is.numeric, all_vars(.>=)) %>% #https://suzan.rbind.io/2018/02/dplyr-tutorial-3/#filter-if
print()

print(max(data_g0["RNFL4.mean"]))
print(min(data_g0["RNFL4.mean"]))
print(max(data_g1["RNFL4.mean"]))
print(min(data_g1["RNFL4.mean"]))
```


#Plot the ratio between ocular_pressure and cornea thickness.


```{r}
q2 <- data %>%
  mutate(ratio = (ocular_pressure / cornea_thickness)) %>%
  select(ratio, RNFL4.mean) %>% #pull out only these
  ggplot(aes(x = RNFL4.mean, y = ratio)) +
  geom_point() +
  scale_y_continuous()+
  scale_x_binned(n.breaks = 10)

q2
```





REPRODUCIBILITY
this will work as long as glaucoma predictuon is binary 0 or 1. 

